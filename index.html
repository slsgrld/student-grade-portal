<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Grade Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        
        .sdg-gradient {
            background: linear-gradient(90deg, #E5243B 0%, #DDA63A 14%, #4C9F38 28%, #C5192D 42%, #FF3A21 56%, #26BDE2 70%, #FCC30B 84%, #A21942 100%);
            height: 5px;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        .remarks-box {
            border-left: 4px solid #DDA63A;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(221, 166, 58, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(221, 166, 58, 0); }
            100% { box-shadow: 0 0 0 0 rgba(221, 166, 58, 0); }
        }
        
        .grade-highlight {
            text-shadow: 0 0 15px rgba(76, 159, 56, 0.3);
        }
        
        .attendance-highlight {
            font-weight: 700;
            color: #4C9F38;
            text-shadow: 0 0 10px rgba(76, 159, 56, 0.2);
        }
        
        .absence-warning {
            font-weight: 700;
            color: #C5192D;
            text-shadow: 0 0 10px rgba(197, 25, 45, 0.2);
        }
        
        .attendance-circle-bg {
            fill: #f3f4f6;
        }
        
        .attendance-circle-present {
            fill: #4C9F38;
        }
        
        .attendance-circle-absent {
            fill: #E5E7EB;
        }
        
        .attendance-warning {
            background-color: #FEF2F2;
            border-color: #FCA5A5;
        }
        
        /* Section color accents */
        .section-grades {
            border-top: 4px solid #4C9F38;
        }
        
        .section-attendance {
            border-top: 4px solid #26BDE2;
        }
        
        .section-midterm {
            border-top: 4px solid #DDA63A;
        }
        
        .section-final {
            border-top: 4px solid #FF3A21;
        }
        
        .section-remarks {
            border-top: 4px solid #A21942;
        }
        
        .info-icon {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .info-icon:hover {
            transform: scale(1.1);
        }
        
        .platform-info {
            background: linear-gradient(to right, rgba(38, 189, 226, 0.1), rgba(76, 159, 56, 0.1));
            border-left: 4px solid #26BDE2;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .footer-link {
            transition: all 0.2s ease;
            color: #4C9F38;
            text-decoration: underline;
        }
        
        .footer-link:hover {
            color: #3d8c29;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="sdg-gradient w-full"></div>
    
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Student Grade Portal</h1>
            <p class="text-gray-600 mt-2">View your grades, attendance, and academic status</p>
        </header>
        
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <div class="mb-6" id="search-section">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Enter Student Number</h2>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="studentNumber" placeholder="e.g., C2024XXXXX" class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <button id="submitBtn" class="px-6 py-2 bg-[#4C9F38] text-white font-medium rounded-md hover:bg-[#3d8c29] transition-colors">
                        Submit
                    </button>
                    <button id="resetBtn" class="px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-md hover:bg-gray-300 transition-colors">
                        Reset
                    </button>
                </div>
                <p id="error-message" class="mt-2 text-red-500 hidden"></p>
            </div>
            
            <div id="results" class="hidden">
                <!-- Results will be displayed here -->
            </div>
        </div>
        
        <footer class="text-center text-gray-700 mt-12 pb-8 bg-gray-50 p-6 rounded-lg shadow-sm">
            <h3 class="font-semibold text-lg mb-3">Student Grade Portal</h3>
            <p>Developed by Dr. Gerald M. Salas</p>
            <p class="mt-3">This platform serves as the official channel for grade dissemination and academic status updates.</p>
            <p class="mt-2">For inquiries or concerns regarding your grades, please contact: 
                <a href="mailto:gerald_salas@psau.edu.ph" class="footer-link font-medium">gerald_salas@psau.edu.ph</a>
            </p>
            <p class="mt-1 text-sm text-gray-500">© 2023 Pampanga State Agricultural University</p>
        </footer>
    </div>
    
    <!-- Attendance Policy Modal -->
    <div id="attendance-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Attendance Policy</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="prose">
                <p class="text-gray-700"><strong>Excerpt from the BOR-approved Student Manual. Also relayed in our class group chat.</strong></p>
                <p class="text-gray-700 mt-3">3.8.1.7. When the students' absences in a subject in one semester have reached 20% of the required number of hours of recitation, lecture, laboratory, or any scheduled work, and the absences are unexcused, the student shall be unofficially dropped from the class and given a grade of 5.0.</p>
                <p class="text-gray-700 mt-3">For this class:</p>
                <ul class="text-gray-700 list-disc pl-5">
                    <li>Each session is 1 hour and 30 minutes</li>
                    <li>Total of 16 sessions = 24 hours</li>
                    <li>20% threshold = 4.8 hours (more than 3 absences)</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Important Notes Modal -->
    <div id="notes-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Important Notes</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="notes-content" class="prose">
                <!-- Content will be added dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Grade Calculation Modal -->
    <div id="grade-calculation-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Grade Calculation</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="prose">
                <p class="text-gray-700"><strong>Final Grade Calculation Formula</strong></p>
                <p class="text-gray-700 mt-3">The final grade is calculated as follows:</p>
                <div class="bg-gray-50 p-4 rounded-lg my-3">
                    <p class="font-medium text-center">Final Grade = 50% of Midterm Grade + 50% of Final Term Grade</p>
                </div>
                
                <p class="text-gray-700 mt-3"><strong>Component Weights:</strong></p>
                <ul class="text-gray-700 list-disc pl-5">
                    <li>Studentship: 10%</li>
                    <li>Activities: 30%</li>
                    <li>Recitation: 10%</li>
                    <li>Quizzes: 20%</li>
                    <li>Major Examination: 30%</li>
                </ul>
                
                <p class="text-gray-700 mt-3">These weights apply to both midterm and final term grades.</p>
            </div>
        </div>
    </div>
    
    <script>
        // Student data from the provided CSV
        const students = [
            {
                studentNumber: "C202402857",
                name: "Abalos, Sean Adrielee S.",
                attendance: 8,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Unofficially Dropped",
                remarks: "Missing Activity 4 Report and Video, Excessive Absences"
            },
            {
                studentNumber: "C202401009",
                name: "Adriano, Precious Iya C.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.23,
                    recitation: 9.1,
                    quizzes: 17.0,
                    exam: 27.8,
                    average: 91.0,
                    grade: 1.9
                },
                final: {
                    studentship: 9.65,
                    activities: 23.4,
                    recitation: 8.0,
                    quizzes: 17.6,
                    exam: 27.9,
                    average: 80.79,
                    grade: 2.7
                },
                finalGradeAverage: 85.29,
                finalGradeEquivalent: 2.3,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402875",
                name: "Apostol, Roy S.",
                attendance: 13,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202406811",
                name: "Batas, Anthony A.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.07,
                    recitation: 9.3,
                    quizzes: 16.35,
                    exam: 24.4,
                    average: 87.13,
                    grade: 2.3
                },
                final: {
                    studentship: 8.72,
                    activities: 21.0,
                    recitation: 7.3,
                    quizzes: 17.6,
                    exam: 29.0,
                    average: 84.0,
                    grade: 2.5
                },
                finalGradeAverage: 85.57,
                finalGradeEquivalent: 2.4,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202401804",
                name: "Buhay, Adrian Zander",
                attendance: 16,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report"
            },
            {
                studentNumber: "C202402858",
                name: "Bustos, Bryan James M.",
                attendance: 13,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202402778",
                name: "Cabigting, Cler Joco S.",
                attendance: 11,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report"
            },
            {
                studentNumber: "C202403026",
                name: "Castro, Alyssa Jionna G.",
                attendance: 16,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202403206",
                name: "Celestino, Justine Gabriel M.",
                attendance: 15,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202402164",
                name: "Clemente, Hasley D.",
                attendance: 16,
                midterm: {
                    studentship: 8.8,
                    activities: 28.3,
                    recitation: 9.1,
                    quizzes: 17.6,
                    exam: 28.5,
                    average: 92.3,
                    grade: 1.8
                },
                final: {
                    studentship: 9.92,
                    activities: 23.3,
                    recitation: 8.0,
                    quizzes: 18.0,
                    exam: 29.1,
                    average: 92.28,
                    grade: 1.8
                },
                finalGradeAverage: 92.29,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402376",
                name: "Cosio, Angelica J.",
                attendance: 15,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202402378",
                name: "Daludgug, Jules Andrei M.",
                attendance: 7,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Video"
            },
            {
                studentNumber: "C202401070",
                name: "David, Thea Destiny M.",
                attendance: 16,
                midterm: {
                    studentship: 8.8,
                    activities: 28.0,
                    recitation: 9.2,
                    quizzes: 18.3,
                    exam: 28.5,
                    average: 92.01,
                    grade: 1.8
                },
                final: {
                    studentship: 9.43,
                    activities: 23.3,
                    recitation: 8.3,
                    quizzes: 18.0,
                    exam: 28.4,
                    average: 91.98,
                    grade: 1.8
                },
                finalGradeAverage: 92.0,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402167",
                name: "Dela Cruz, Jamella N.",
                attendance: 8,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Unofficially Dropped",
                remarks: "Excessive Absences in Class, Missing Activity 4 Video"
            },
            {
                studentNumber: "C202401258",
                name: "Del Rosario, Alljen",
                attendance: 16,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202401689",
                name: "Divinagracia, Roxanne D.",
                attendance: 13,
                midterm: {
                    studentship: 8.8,
                    activities: 28.0,
                    recitation: 9.1,
                    quizzes: 15.45,
                    exam: 24.3,
                    average: 85.65,
                    grade: 2.5
                },
                final: {
                    studentship: 9.04,
                    activities: 21.0,
                    recitation: 7.0,
                    quizzes: 16.13,
                    exam: 28.0,
                    average: 86.57,
                    grade: 2.4
                },
                finalGradeAverage: 86.11,
                finalGradeEquivalent: 2.4,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402112",
                name: "Esguerra, Shayne Raven M.",
                attendance: 8,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Unofficially Dropped",
                remarks: "Excessive Absences in Class, Missing Activity 4 Video"
            },
            {
                studentNumber: "C202401274",
                name: "Franco, Althea Faye M.",
                attendance: 13,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202403284",
                name: "Frigillana, Casandrianne Jahnea A.",
                attendance: 15,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Video"
            },
            {
                studentNumber: "C202402151",
                name: "Geronimo, Eric Z.",
                attendance: 10,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202401622",
                name: "Ibay, Mark Leo H.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.2,
                    recitation: 9.3,
                    quizzes: 17.3,
                    exam: 27.3,
                    average: 89.5,
                    grade: 2.1
                },
                final: {
                    studentship: 9.93,
                    activities: 25.0,
                    recitation: 7.4,
                    quizzes: 16.95,
                    exam: 27.8,
                    average: 87.19,
                    grade: 2.3
                },
                finalGradeAverage: 88.34,
                finalGradeEquivalent: 2.2,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402868",
                name: "Lopez, Luzlyn Ghed",
                attendance: 14,
                midterm: {
                    studentship: 8.8,
                    activities: 27.97,
                    recitation: 9.3,
                    quizzes: 18.3,
                    exam: 28.0,
                    average: 92.57,
                    grade: 1.8
                },
                final: {
                    studentship: 9.43,
                    activities: 23.6,
                    recitation: 8.3,
                    quizzes: 15.98,
                    exam: 28.9,
                    average: 92.01,
                    grade: 1.8
                },
                finalGradeAverage: 92.29,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202403347",
                name: "Magalang, Kris Joanna B.",
                attendance: 16,
                midterm: {
                    studentship: 8.8,
                    activities: 27.57,
                    recitation: 9.4,
                    quizzes: 18.5,
                    exam: 29.7,
                    average: 93.97,
                    grade: 1.7
                },
                final: {
                    studentship: 9.99,
                    activities: 29.7,
                    recitation: 8.5,
                    quizzes: 17.0,
                    exam: 29.9,
                    average: 94.99,
                    grade: 1.6
                },
                finalGradeAverage: 94.48,
                finalGradeEquivalent: 1.6,
                interpretation: "Passed",
                remarks: ""
            },
            // Part 2 data
            {
                studentNumber: "C202401189",
                name: "Maglaqui, Jerryl Jane F.",
                attendance: 7,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Unofficially Dropped",
                remarks: "Missing Activity 4 Report and Video, Excessive Absences"
            },
            {
                studentNumber: "C202401010",
                name: "Marcial, Estephanie Megs S.",
                attendance: 14,
                midterm: {
                    studentship: 8.8,
                    activities: 28.33,
                    recitation: 9.3,
                    quizzes: 15.8,
                    exam: 23.7,
                    average: 85.93,
                    grade: 2.5
                },
                final: {
                    studentship: 9.41,
                    activities: 28.6,
                    recitation: 7.6,
                    quizzes: 15.07,
                    exam: 25.2,
                    average: 86.48,
                    grade: 2.4
                },
                finalGradeAverage: 86.21,
                finalGradeEquivalent: 2.4,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402196",
                name: "Mercado, Charmine O.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.03,
                    recitation: 9.3,
                    quizzes: 18.1,
                    exam: 28.8,
                    average: 93.33,
                    grade: 1.7
                },
                final: {
                    studentship: 9.96,
                    activities: 28.8,
                    recitation: 8.0,
                    quizzes: 16.51,
                    exam: 27.9,
                    average: 90.77,
                    grade: 2.0
                },
                finalGradeAverage: 91.9,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202401919",
                name: "Mercado, Nica G.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.13,
                    recitation: 9.2,
                    quizzes: 18.1,
                    exam: 29.1,
                    average: 94.3,
                    grade: 1.6
                },
                final: {
                    studentship: 9.42,
                    activities: 28.8,
                    recitation: 8.3,
                    quizzes: 15.93,
                    exam: 28.8,
                    average: 91.25,
                    grade: 1.9
                },
                finalGradeAverage: 92.78,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202400813",
                name: "Mijares, Ma. Samantha V.",
                attendance: 14,
                midterm: {
                    studentship: 8.8,
                    activities: 28.2,
                    recitation: 9.1,
                    quizzes: 19.1,
                    exam: 29.1,
                    average: 94.3,
                    grade: 1.6
                },
                final: {
                    studentship: 9.37,
                    activities: 27.3,
                    recitation: 8.2,
                    quizzes: 16.07,
                    exam: 29.0,
                    average: 89.14,
                    grade: 2.1
                },
                finalGradeAverage: 91.72,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402148",
                name: "Miranda, Jhamy M.",
                attendance: 13,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            },
            {
                studentNumber: "C202402546",
                name: "Morales, Franzen",
                attendance: 13,
                midterm: {
                    studentship: 8.8,
                    activities: 28.3,
                    recitation: 9.3,
                    quizzes: 15.5,
                    exam: 27.0,
                    average: 85.0,
                    grade: 2.6
                },
                final: {
                    studentship: 9.62,
                    activities: 27.6,
                    recitation: 7.9,
                    quizzes: 14.8,
                    exam: 21.9,
                    average: 81.22,
                    grade: 2.7
                },
                finalGradeAverage: 83.11,
                finalGradeEquivalent: 2.6,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402783",
                name: "Muñoz, Alexander K.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 28.2,
                    recitation: 9.1,
                    quizzes: 18.25,
                    exam: 28.1,
                    average: 93.15,
                    grade: 1.7
                },
                final: {
                    studentship: 9.68,
                    activities: 26.8,
                    recitation: 8.0,
                    quizzes: 16.8,
                    exam: 27.0,
                    average: 90.02,
                    grade: 2.0
                },
                finalGradeAverage: 91.58,
                finalGradeEquivalent: 1.8,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202403086",
                name: "Nacis, Kimberly P.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 27.03,
                    recitation: 9.0,
                    quizzes: 18.0,
                    exam: 26.3,
                    average: 85.98,
                    grade: 2.5
                },
                final: {
                    studentship: 9.6,
                    activities: 26.4,
                    recitation: 8.3,
                    quizzes: 16.9,
                    exam: 27.0,
                    average: 91.96,
                    grade: 1.9
                },
                finalGradeAverage: 88.97,
                finalGradeEquivalent: 2.1,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402293",
                name: "Rilan, Kyrie Elleison P.",
                attendance: 10,
                midterm: {
                    studentship: 8.8,
                    activities: 26.1,
                    recitation: 9.3,
                    quizzes: 16.55,
                    exam: 25.8,
                    average: 85.95,
                    grade: 2.5
                },
                final: {
                    studentship: 8.11,
                    activities: 24.6,
                    recitation: 8.0,
                    quizzes: 17.4,
                    exam: 25.5,
                    average: 80.45,
                    grade: 2.8
                },
                finalGradeAverage: 83.2,
                finalGradeEquivalent: 2.6,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202401925",
                name: "Usi, Angel Fatima M.",
                attendance: 15,
                midterm: {
                    studentship: 8.8,
                    activities: 26.43,
                    recitation: 9.2,
                    quizzes: 18.15,
                    exam: 28.9,
                    average: 91.48,
                    grade: 1.9
                },
                final: {
                    studentship: 9.42,
                    activities: 22.8,
                    recitation: 8.0,
                    quizzes: 17.3,
                    exam: 29.0,
                    average: 84.83,
                    grade: 2.2
                },
                finalGradeAverage: 88.16,
                finalGradeEquivalent: 2.2,
                interpretation: "Passed",
                remarks: ""
            },
            {
                studentNumber: "C202402289",
                name: "Villegas, Jeriene Jane G.",
                attendance: 13,
                midterm: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                final: {
                    studentship: "N/A",
                    activities: "N/A",
                    recitation: "N/A",
                    quizzes: "N/A",
                    exam: "N/A",
                    average: "N/A",
                    grade: "N/A"
                },
                finalGradeAverage: "N/A",
                finalGradeEquivalent: "N/A",
                interpretation: "Incomplete",
                remarks: "Missing Activity 4 Report and Video"
            }
        ];
        
        // DOM elements
        const submitBtn = document.getElementById('submitBtn');
        const resetBtn = document.getElementById('resetBtn');
        const studentNumberInput = document.getElementById('studentNumber');
        const errorMessage = document.getElementById('error-message');
        const resultsDiv = document.getElementById('results');
        const attendanceModal = document.getElementById('attendance-modal');
        const notesModal = document.getElementById('notes-modal');
        const notesContent = document.getElementById('notes-content');
        const gradeCalculationModal = document.getElementById('grade-calculation-modal');
        
        // Event listeners
        submitBtn.addEventListener('click', searchStudent);
        resetBtn.addEventListener('click', resetForm);
        studentNumberInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchStudent();
            }
        });
        
        // Close modals when clicking the close button
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                attendanceModal.classList.add('hidden');
                notesModal.classList.add('hidden');
                gradeCalculationModal.classList.add('hidden');
            });
        });
        
        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === attendanceModal) {
                attendanceModal.classList.add('hidden');
            }
            if (e.target === notesModal) {
                notesModal.classList.add('hidden');
            }
            if (e.target === gradeCalculationModal) {
                gradeCalculationModal.classList.add('hidden');
            }
        });
        
        function searchStudent() {
            const studentNumber = studentNumberInput.value.trim();
            
            if (!studentNumber) {
                showError("Please enter a Student Number");
                return;
            }
            
            const student = students.find(s => s.studentNumber === studentNumber);
            
            if (!student) {
                showError("Student not found. Please check your Student Number.");
                return;
            }
            
            displayStudentData(student);
        }
        
        function resetForm() {
            studentNumberInput.value = '';
            errorMessage.classList.add('hidden');
            resultsDiv.classList.add('hidden');
            resultsDiv.innerHTML = '';
        }
        
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            resultsDiv.classList.add('hidden');
        }
        
        function displayStudentData(student) {
            errorMessage.classList.add('hidden');
            
            // Determine status color
            let statusColor = '';
            let statusBg = '';
            let statusBorder = '';
            
            if (student.interpretation === "Passed") {
                statusColor = 'text-green-700';
                statusBg = 'bg-green-100';
                statusBorder = 'border-green-300';
            } else if (student.interpretation === "Incomplete") {
                statusColor = 'text-orange-700';
                statusBg = 'bg-orange-100';
                statusBorder = 'border-orange-300';
            } else if (student.interpretation === "Unofficially Dropped") {
                statusColor = 'text-red-700';
                statusBg = 'bg-red-100';
                statusBorder = 'border-red-300';
            }
            
            // Calculate attendance percentage and check if it's below the threshold
            const totalHours = 16 * 1.5; // 16 sessions × 1.5 hours per session
            const attendedHours = student.attendance * 1.5;
            const absentHours = totalHours - attendedHours;
            const attendancePercentage = (student.attendance / 16) * 100;
            const absencePercentage = 100 - attendancePercentage;
            
            // Check if absences exceed 20% threshold (which is 4.8 hours or more than 3 sessions)
            const isAbsenceExcessive = absentHours >= (totalHours * 0.2);
            
            // Create HTML for results
            resultsDiv.innerHTML = `
                <div class="fade-in">
                    <!-- Final Assessment Section -->
                    <div class="mb-8 p-6 bg-white rounded-lg border border-gray-200 shadow-md section-grades">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">${student.name}</h2>
                            <div class="flex items-center">
                                <span class="text-sm text-gray-500 mr-2">Grade Calculation</span>
                                <div id="grade-info" class="info-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Emphasized Final Grade Section -->
                        <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-8 p-4 bg-gray-50 rounded-lg border ${statusBorder}">
                            <div class="flex-1 text-center">
                                <div class="text-sm uppercase tracking-wide text-gray-500 mb-1">Final Grade Average</div>
                                <div class="text-5xl font-bold grade-highlight ${student.interpretation === "Passed" ? 'text-[#4C9F38]' : student.interpretation === "Incomplete" ? 'text-[#DDA63A]' : 'text-[#C5192D]'}">
                                    ${student.finalGradeAverage === "N/A" ? "N/A" : typeof student.finalGradeAverage === 'number' ? student.finalGradeAverage.toFixed(2) : student.finalGradeAverage}
                                </div>
                            </div>
                            
                            <div class="flex-1 text-center">
                                <div class="text-sm uppercase tracking-wide text-gray-500 mb-1">Final Grade Equivalent</div>
                                <div class="text-5xl font-bold grade-highlight ${student.interpretation === "Passed" ? 'text-[#4C9F38]' : student.interpretation === "Incomplete" ? 'text-[#DDA63A]' : 'text-[#C5192D]'}">
                                    ${student.finalGradeEquivalent}
                                </div>
                            </div>
                            
                            <div class="flex-1 text-center">
                                <div class="text-sm uppercase tracking-wide text-gray-500 mb-1">Status</div>
                                <div class="text-2xl font-bold ${statusColor}">
                                    ${student.interpretation}
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div class="p-4 bg-[#FFF8E1] rounded-lg text-center border border-[#FFE082]">
                                <div class="text-sm text-gray-600">Midterm Grade</div>
                                <div class="text-xl font-semibold text-[#F57F17]">${student.midterm.grade}</div>
                                <div class="text-sm text-gray-600">Average: ${student.midterm.average === "N/A" ? "N/A" : typeof student.midterm.average === 'number' ? student.midterm.average.toFixed(2) : student.midterm.average}</div>
                            </div>
                            
                            <div class="p-4 bg-[#E8F5E9] rounded-lg text-center border border-[#A5D6A7]">
                                <div class="text-sm text-gray-600">Final Term Grade</div>
                                <div class="text-xl font-semibold text-[#2E7D32]">${student.final.grade}</div>
                                <div class="text-sm text-gray-600">Average: ${student.final.average === "N/A" ? "N/A" : typeof student.final.average === 'number' ? student.final.average.toFixed(2) : student.final.average}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Remarks Section (if there are remarks) -->
                    ${student.remarks || (student.interpretation !== "Passed") ? `
                    <div class="mb-8 p-6 bg-amber-50 rounded-lg border-l-4 border-amber-500 shadow-lg section-remarks">
                        <div class="flex items-start">
                            <div class="mr-4 text-amber-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-amber-800 mb-2">Important Notes</h3>
                                ${student.remarks ? `<p class="text-amber-900 font-medium text-lg mb-3">${student.remarks}</p>` : ''}
                                
                                ${student.interpretation === "Incomplete" ? `
                                <p class="text-amber-800">You have one year to complete the missing requirements. If not completed, the grade will lapse to 5.0.</p>
                                ` : student.interpretation === "Unofficially Dropped" ? `
                                <p class="text-amber-800">Your academic status is based on the Attendance Policy outlined in the BOR-approved Student Manual.</p>
                                <p class="text-amber-800 mt-2">When absences reach 20% of the required number of hours (${Math.round(totalHours * 0.2)} hours or more than ${Math.floor((totalHours * 0.2) / 1.5)} sessions), the student shall be unofficially dropped from the class and given a grade of 5.0.</p>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                    ` : ''}
                    
                    <!-- Attendance Record -->
                    <div class="mb-8 p-6 bg-white rounded-lg border border-gray-200 shadow-md ${isAbsenceExcessive ? 'attendance-warning' : ''} section-attendance">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Attendance Record</h3>
                        
                        ${isAbsenceExcessive ? `
                        <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg">
                            <div class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                                <span class="text-red-700 font-medium">Warning: Absences have reached or exceeded 20% of total class hours</span>
                            </div>
                        </div>
                        ` : ''}
                        
                        <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                            <div class="relative w-36 h-36">
                                <svg class="w-full h-full" viewBox="0 0 100 100">
                                    <!-- Background circle -->
                                    <circle cx="50" cy="50" r="45" fill="#f3f4f6" />
                                    
                                    <!-- Attendance pie chart -->
                                    <circle cx="50" cy="50" r="45" fill="transparent" stroke="#E5E7EB" stroke-width="10" />
                                    
                                    <!-- Present portion (green) -->
                                    <path d="${describeArc(50, 50, 45, 0, attendancePercentage * 3.6)}" 
                                          fill="none" 
                                          stroke="${attendancePercentage >= 80 ? '#4C9F38' : attendancePercentage >= 60 ? '#DDA63A' : '#C5192D'}" 
                                          stroke-width="10" />
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center flex-col">
                                    <span class="text-3xl font-bold">${Math.round(attendancePercentage)}%</span>
                                    <span class="text-sm text-gray-500">attended</span>
                                </div>
                            </div>
                            
                            <div class="text-center md:text-left">
                                <p class="text-gray-700 mb-2">
                                    <span class="attendance-highlight">${student.attendance}</span> present out of 16 sessions 
                                    (<span class="absence-warning">${16 - student.attendance}</span> absences)
                                </p>
                                <p class="text-gray-700 mb-4">
                                    Total hours: ${attendedHours} of ${totalHours} hours
                                    ${isAbsenceExcessive ? 
                                    `<span class="block mt-1 text-red-600 font-semibold">
                                        Absences: ${absentHours} hours (${Math.round(absencePercentage)}% of total hours)
                                    </span>` : ''}
                                </p>
                                <button id="view-policy-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                                    View Attendance Policy
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Grade Details -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <!-- Midterm Grade Details -->
                        <div class="p-6 bg-white rounded-lg border border-gray-200 shadow-md section-midterm">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Midterm Grade Details</h3>
                            <table class="w-full">
                                <tbody>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Studentship (10%)</td>
                                        <td class="py-2 font-medium text-right">${student.midterm.studentship}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Activities (30%)</td>
                                        <td class="py-2 font-medium text-right">${student.midterm.activities}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Recitation (10%)</td>
                                        <td class="py-2 font-medium text-right">${student.midterm.recitation}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Quizzes (20%)</td>
                                        <td class="py-2 font-medium text-right">${student.midterm.quizzes}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Major Examination (30%)</td>
                                        <td class="py-2 font-medium text-right">${student.midterm.exam}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600 font-semibold">Midterm Average</td>
                                        <td class="py-2 font-semibold text-right">${student.midterm.average}</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-gray-600 font-semibold">Midterm Grade</td>
                                        <td class="py-2 font-semibold text-right">${student.midterm.grade}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Final Term Grade Details -->
                        <div class="p-6 bg-white rounded-lg border border-gray-200 shadow-md section-final">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Final Term Grade Details</h3>
                            <table class="w-full">
                                <tbody>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Studentship (10%)</td>
                                        <td class="py-2 font-medium text-right">${student.final.studentship}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Activities (30%)</td>
                                        <td class="py-2 font-medium text-right">${student.final.activities}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Recitation (10%)</td>
                                        <td class="py-2 font-medium text-right">${student.final.recitation}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Quizzes (20%)</td>
                                        <td class="py-2 font-medium text-right">${student.final.quizzes}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600">Major Examination (30%)</td>
                                        <td class="py-2 font-medium text-right">${student.final.exam}</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="py-2 text-gray-600 font-semibold">Final Average</td>
                                        <td class="py-2 font-semibold text-right">${student.final.average}</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 text-gray-600 font-semibold">Final Grade</td>
                                        <td class="py-2 font-semibold text-right">${student.final.grade}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Academic Information -->
                    <div class="p-6 platform-info rounded-lg mb-8">
                        <div class="flex items-start">
                            <div class="mr-3 text-blue-500 mt-1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <p class="text-gray-800 font-medium">
                                For transparency, the detailed scores of your activities, assignments, and other class submissions are available on our official learning platform, <span class="text-blue-700 font-semibold">Gnomio</span>. Please log in to view your full performance record.
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            resultsDiv.classList.remove('hidden');
            
            // Add event listeners for buttons
            document.getElementById('view-policy-btn').addEventListener('click', () => {
                attendanceModal.classList.remove('hidden');
            });
            
            document.getElementById('grade-info').addEventListener('click', () => {
                gradeCalculationModal.classList.remove('hidden');
            });
        }
        
        // Helper function to create arc path for SVG pie chart
        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
            const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
            return {
                x: centerX + (radius * Math.cos(angleInRadians)),
                y: centerY + (radius * Math.sin(angleInRadians))
            };
        }
        
        function describeArc(x, y, radius, startAngle, endAngle) {
            const start = polarToCartesian(x, y, radius, endAngle);
            const end = polarToCartesian(x, y, radius, startAngle);
            const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
            return [
                "M", start.x, start.y,
                "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y
            ].join(" ");
        }
    </script>
</body>
</html>